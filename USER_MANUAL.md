# HAKLES - Руководство пользователя

## Содержание
1. [Обзор устройства](#обзор-устройства)
2. [Настройка оборудования](#настройка-оборудования)
3. [Начало работы](#начало-работы)
4. [Управление](#управление)
5. [Приложения](#приложения)
6. [Использование SD карты](#использование-sd-карты)
7. [Решение проблем](#решение-проблем)
8. [Удаленное управление](#удаленное-управление)

## Обзор устройства

HAKLES - это устройство для исследования безопасности на базе микроконтроллера ESP32 с OLED дисплеем SH1106 (128x64 пикселей). Устройство имеет систему меню и встроенные приложения для исследования безопасности WiFi, Bluetooth, работы с радиомодулями и утилиты.

## Настройка оборудования

### Компоненты
- Плата ESP32
- OLED дисплей SH1106 (128x64)
- Модуль MicroSD карты
- 7 кнопок (UP, DOWN, LEFT, RIGHT, OK, BACK, FUNCTION)
- Провода
- Макетная плата (опционально)
- CC1101 модуль (опционально)
- ИК светодиод (опционально)

### Подключение
- Дисплей SDA -> ESP32 GPIO21
- Дисплей SCL -> ESP32 GPIO22
- SD MOSI -> ESP32 GPIO23
- SD MISO -> ESP32 GPIO19
- SD SCK -> ESP32 GPIO18
- SD CS -> ESP32 GPIO5
- Кнопка UP -> ESP32 GPIO12
- Кнопка DOWN -> ESP32 GPIO13
- Кнопка LEFT -> ESP32 GPIO14
- Кнопка RIGHT -> ESP32 GPIO15
- Кнопка OK -> ESP32 GPIO16
- Кнопка BACK -> ESP32 GPIO17
- Кнопка FUNCTION -> ESP32 GPIO18

## Начало работы

1. Вставьте microSD карту (FAT32) в модуль SD карты
2. Подключите устройство к питанию через USB
3. Устройство загрузится и покажет экран запуска
4. Нажмите кнопку OK для входа в главное меню

## Управление

- UP: Навигация вверх в меню
- DOWN: Навигация вниз в меню
- LEFT: Навигация влево (зависит от приложения)
- RIGHT: Навигация вправо (зависит от приложения)
- OK: Выбор, подтверждение действий
- BACK: Возврат назад, отмена, выход из приложений
- FUNCTION: Специальная функция (зависит от приложения)
- BACK (долгое нажатие): Возврат в главное меню

## Приложения

### Настройки (Settings)

Настройка параметров устройства.

**Возможности:**
- Отображение батареи (иконка/процент)
- Переназначение кнопок
- Сохранение настроек в EEPROM

**Управление:**
- UP/DOWN: Навигация по настройкам
- LEFT/RIGHT: Изменение значений
- OK: Сохранить настройки
- BACK: Вернуться в меню

### Файловый менеджер (Explorer)

Просмотр файлов и папок на SD карте.

**Возможности:**
- Список файлов и папок
- Просмотр содержимого текстовых файлов
- Навигация по директориям

**Управление:**
- UP/DOWN: Навигация по списку
- OK: Открыть папку или файл
- BACK: Вернуться в родительскую папку или меню

### Расширенный WiFi сканер (Enhanced WiFi Scanner)

Сканирование WiFi сетей с расширенной информацией.

**Возможности:**
- Сканирование WiFi сетей в реальном времени
- Отображение силы сигнала
- Информация о шифровании
- Детальная информация о сетях

**Управление:**
- UP/DOWN: Навигация по списку сетей
- OK: Просмотр деталей
- BACK: Вернуться в меню

### Захват WiFi пакетов (WiFi Packet Capture)

Перехват и анализ WiFi пакетов.

**Управление:**
- OK: Старт/стоп захвата
- BACK: Вернуться в меню

### WiFi Deauth атака (WiFi Deauth Attack)

Отправка deauthentication пакетов.

**Предупреждение:** Используйте только в образовательных целях и с разрешения владельца сети!

**Управление:**
- UP/DOWN: Выбор цели
- OK: Запуск/остановка атаки
- BACK: Вернуться в меню

### Фальшивая точка доступа (Evil Portal)

Создание поддельной WiFi точки доступа.

**Предупреждение:** Используйте только в образовательных целях!

**Управление:**
- OK: Запуск/остановка портала
- BACK: Вернуться в меню

### Bluetooth сканер (Bluetooth Scanner)

Сканирование Bluetooth устройств.

**Возможности:**
- Поиск Bluetooth устройств
- Отображение MAC адресов
- Информация о типе устройства

**Управление:**
- UP/DOWN: Навигация по списку
- OK: Просмотр деталей
- BACK: Вернуться в меню

### Bluetooth атака (Bluetooth Attack)

Инструменты для тестирования Bluetooth безопасности.

**Предупреждение:** Используйте только в образовательных целях!

**Управление:**
- UP/DOWN: Выбор типа атаки
- OK: Запуск атаки
- BACK: Вернуться в меню

### CC1101 трансивер (CC1101 Transceiver)

Работа с радиомодулем CC1101.

**Возможности:**
- Прием и передача на различных частотах
- Анализ радиосигналов

**Управление:**
- UP/DOWN: Навигация
- OK: Выбор функции
- BACK: Вернуться в меню

### ИК выключатель ТВ (IR TV Off)

Отправка ИК команд для выключения телевизоров.

**Возможности:**
- Поддержка различных брендов ТВ
- Универсальные команды выключения

**Управление:**
- UP/DOWN: Выбор бренда
- OK: Отправить команду
- BACK: Вернуться в меню

### Бинарный калькулятор (Binary Calculator)

Калькулятор для работы с двоичными числами.

**Возможности:**
- Операции с двоичными числами
- Конвертация между системами счисления

**Управление:**
- UP/DOWN: Навигация
- LEFT/RIGHT: Выбор операции
- OK: Подтверждение
- BACK: Очистка/возврат в меню

### Секундомер (Stopwatch)

Простой секундомер.

**Возможности:**
- Старт/стоп
- Запись промежуточного времени
- Сброс

**Управление:**
- OK: Старт/стоп
- UP: Запись круга
- DOWN: Сброс
- BACK: Вернуться в меню

## Использование SD карты

Устройство поддерживает microSD карты до 32GB в формате FAT32.

**Поддерживаемые операции:**
- Чтение файлов
- Просмотр директорий
- Просмотр текстовых файлов

**Рекомендации:**
- Используйте короткие имена файлов (формат 8.3)
- Для лучшей совместимости используйте текстовые файлы
- Организуйте файлы в папки для удобной навигации

## Решение проблем

### Проблемы с дисплеем
- Проверьте все соединения с дисплеем
- Убедитесь, что дисплей получает питание
- Проверьте подключение SDA/SCL к GPIO21/GPIO22

### Проблемы с SD картой
- Убедитесь, что SD карта правильно вставлена
- Проверьте соединения SD карты
- Убедитесь, что SD карта отформатирована в FAT32
- Попробуйте другую SD карту

### Проблемы с кнопками
- Проверьте соединения кнопок
- Убедитесь, что кнопки правильно подключены к земле
- Проверьте наличие подтягивающих резисторов

### WiFi сканер не находит сети
- Убедитесь, что устройство находится в зоне действия WiFi сетей
- Проверьте подключение WiFi антенны (если есть)
- Перезапустите приложение

### Устройство не включается
- Проверьте USB подключение
- Убедитесь, что плата ESP32 работает
- Проверьте отсутствие коротких замыканий

### Проблемы с прошивкой
- Перепрошейте устройство через PlatformIO
- Проверьте ошибки компиляции
- Убедитесь, что все зависимости установлены

## Удаленное управление

Прошивка HAKLES поддерживает управление через serial интерфейс, что позволяет управлять устройством удаленно с компьютера.

### Serial команды

Устройство принимает следующие команды через serial интерфейс (115200 baud):
- `UP` - Нажатие кнопки UP
- `DOWN` - Нажатие кнопки DOWN
- `LEFT` - Нажатие кнопки LEFT
- `RIGHT` - Нажатие кнопки RIGHT
- `OK` - Нажатие кнопки OK
- `BACK` - Нажатие кнопки BACK
- `FUNCTION` - Нажатие кнопки FUNCTION
- `BACK_LONG` - Длинное нажатие кнопки BACK
- `GET_DISPLAY` - Получить содержимое дисплея

Каждая команда должна быть отправлена на отдельной строке. Команды чувствительны к регистру.

### Python GUI контроллер

Предоставляется Python приложение с графическим интерфейсом (`esp_controller_gui.py`):

**Возможности:**
- Виртуальный D-pad с кнопками UP, DOWN, LEFT, RIGHT
- Центральная кнопка OK
- Кнопки FUNCTION и BACK
- Кнопка BACK LONG для длинного нажатия
- Автоопределение serial порта
- Горячие клавиши (стрелки, Enter, Escape, F1)
- Индикатор подключения
- Визуализация дисплея в реальном времени (128x64 пикселей)

**Использование:**
1. Подключите ESP32 к компьютеру через USB
2. Установите зависимости: `pip install -r requirements.txt`
3. Запустите контроллер: `python esp_controller_gui.py`
4. Выберите serial порт из списка
5. Установите скорость 115200 (по умолчанию)
6. Нажмите "Connect"
7. Используйте кнопки или горячие клавиши

**Горячие клавиши:**
- Стрелки: UP, DOWN, LEFT, RIGHT
- Enter: OK
- Escape: BACK
- F1: FUNCTION

**Быстрый запуск:**
- Windows: `run_controller.bat`
- Linux/macOS: `./run_controller.sh`

### Сборка исполняемых файлов

Контроллер можно собрать в исполняемый файл:

**Windows:**
```bash
pyinstaller --onefile --windowed esp_controller_gui.py
```

**Linux:**
```bash
pyinstaller --onefile esp_controller_gui.py
```

Исполняемые файлы будут в папке `dist/`.

## Предупреждение о безопасности

Многие функции этого устройства предназначены только для образовательных целей и тестирования безопасности собственных сетей. Использование инструментов для атак на чужие сети без разрешения является незаконным. Всегда получайте письменное разрешение перед тестированием безопасности любой сети или устройства, которое вам не принадлежит.