#ifndef INFRARED_MENU_H
#define INFRARED_MENU_H

#include <Adafruit_GFX.h>
#include <Adafruit_SH110X.h>
#include "CONFIG.h"

#define IR_MENU_ITEM_COUNT 5
static const char* irMenuItems[] = {"IR-Send", "IR-Read", "PJ-OFF", "AC-OFF", "TV-OFF"};

static const unsigned char PROGMEM image_Power_bits[] = {
  0x1f,0xff,0xfc,0x00,0x20,0x00,0x02,0x00,0x40,0x00,0x01,0x00,0x80,0x00,0x00,0x80,
  0x80,0x08,0x00,0x80,0x80,0x1c,0x00,0x80,0x80,0x1c,0x00,0x80,0x81,0x9c,0xc0,0x80,
  0x83,0x9c,0xe0,0x80,0x87,0x1c,0x70,0x80,0x86,0x1c,0x30,0x80,0x86,0x1c,0x30,0x80,
  0x86,0x08,0x30,0x80,0x86,0x00,0x30,0x80,0x86,0x00,0x30,0x80,0x86,0x00,0x30,0x80,
  0x87,0x00,0x70,0x80,0x83,0x80,0xe0,0x80,0x81,0xc1,0xc0,0x80,0x80,0xff,0x80,0x80,
  0x80,0x3e,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0xc0,0x00,0x01,0x80,
  0x60,0x00,0x03,0x00,0x3f,0xff,0xfe,0x00,0x1f,0xff,0xfc,0x00
};

static const unsigned char PROGMEM image_Power_hvr_bits[] = {
  0x1f,0xff,0xfc,0x00,0x3f,0xff,0xfe,0x00,0x7f,0xff,0xff,0x00,0xff,0xff,0xff,0x80,
  0xff,0xf7,0xff,0x80,0xff,0xe3,0xff,0x80,0xff,0xe3,0xff,0x80,0xfe,0x63,0x3f,0x80,
  0xfc,0x63,0x1f,0x80,0xf8,0xe3,0x8f,0x80,0xf9,0xe3,0xcf,0x80,0xf9,0xe3,0xcf,0x80,
  0xf9,0xf7,0xcf,0x80,0xf9,0xff,0xcf,0x80,0xf9,0xff,0xcf,0x80,0xf9,0xff,0xcf,0x80,
  0xf8,0xff,0x8f,0x80,0xfc,0x7f,0x1f,0x80,0xfe,0x3e,0x3f,0x80,0xff,0x00,0x7f,0x80,
  0xff,0xc1,0xff,0x80,0xff,0xff,0xff,0x80,0xff,0xff,0xff,0x80,0xff,0xff,0xff,0x80,
  0x7f,0xff,0xff,0x00,0x3f,0xff,0xfe,0x00,0x1f,0xff,0xfc,0x00
};

static const unsigned char PROGMEM image_InfraredLearnShort_bits[] = {
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7f,0xff,0xff,0xff,0xff,0xff,0xe0,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x10,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x08,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x04,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x12,0x00,0x00,0x00,0x00,0x00,0x00,0x02,
  0x0f,0xff,0xff,0xff,0xff,0x80,0x02,0x00,0x14,0x01,0xff,0xff,0xff,0x00,0xf8,0x02,
  0x10,0x00,0x00,0x00,0x00,0x40,0x01,0x00,0x24,0x03,0x55,0x55,0x55,0x83,0xfe,0x01,
  0x20,0x00,0x00,0x00,0x06,0x20,0x10,0x80,0x48,0x02,0xaa,0xaa,0xaa,0x87,0xdf,0x00,
  0x20,0x30,0x0d,0xb6,0xc9,0x20,0x08,0x80,0x50,0x03,0x7f,0x55,0x55,0x8f,0x8f,0x80,
  0x20,0x30,0x0d,0xb6,0xc9,0x20,0x04,0x40,0x90,0x02,0xc0,0xaa,0xaa,0x8f,0xff,0x80,
  0x20,0x30,0x0c,0x00,0x06,0x20,0x44,0x40,0xa0,0x03,0x80,0x55,0x55,0x9f,0x8f,0xc0,
  0x20,0x00,0x01,0xb6,0xc0,0x38,0x24,0x40,0x40,0x03,0x38,0x7a,0xaa,0x9d,0x75,0xc0,
  0x23,0xb7,0x0d,0xb6,0xc0,0x24,0x24,0x40,0x40,0x02,0x38,0x65,0x55,0x99,0x74,0xc0,
  0x23,0xb7,0x0c,0x00,0x00,0x24,0x24,0x40,0x80,0x02,0x38,0x8e,0xaa,0x9d,0x75,0xc0,
  0x20,0x00,0x0d,0xb6,0xc0,0x38,0x24,0x41,0x00,0x02,0x00,0x1d,0x55,0x9f,0x8f,0xc6,
  0x20,0x30,0x01,0xb6,0xc6,0x20,0x44,0x41,0x00,0x02,0x04,0x3a,0xaa,0x8f,0xff,0x8f,
  0x20,0x30,0x00,0x00,0x0f,0x20,0x04,0x42,0x00,0x02,0x03,0xfd,0x55,0x8f,0x8f,0x9f,
  0x20,0x31,0xef,0x7b,0xcf,0x20,0x08,0x82,0x00,0x02,0x00,0x7e,0xaa,0x87,0xdf,0x1f,
  0x20,0x01,0xef,0x7b,0xc6,0x20,0x10,0x82,0x00,0x02,0x00,0x0d,0x55,0x83,0xfe,0x0f,
  0x10,0x00,0x00,0x00,0x00,0x40,0x01,0x02,0x00,0x02,0x01,0xfa,0xaa,0xb0,0xf8,0x06,
  0x0f,0xff,0xff,0xff,0xff,0x80,0x02,0x01,0x00,0x01,0xff,0xff,0xff,0x30,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};



void displayIRMenu(Adafruit_SH1106G &display, byte menuIndex) {
  display.clearDisplay();
  
  auto centerText = [](const char* text, int textSize) {
    return (128 - strlen(text) * (textSize == 2 ? 12 : 6)) / 2;
  };

  byte next = (menuIndex + 1) % IR_MENU_ITEM_COUNT;
  byte prev = (menuIndex + IR_MENU_ITEM_COUNT - 1) % IR_MENU_ITEM_COUNT;

  display.setTextSize(2);
  display.setCursor(centerText(irMenuItems[menuIndex], 2), 25);
  display.print(irMenuItems[menuIndex]);
  
  display.setTextSize(1);
  display.setCursor(centerText(irMenuItems[next], 1), 50);
  display.print(irMenuItems[next]);
  display.setCursor(centerText(irMenuItems[prev], 1), 7);
  display.print(irMenuItems[prev]);
  
  display.setCursor(2, 30);
  display.print(">");
  display.setCursor(120, 30);
  display.print("<");
  
  display.display();
}

#endif
